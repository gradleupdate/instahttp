sudo: false
language: java
jdk: oraclejdk7

before_deploy:
- ./gradlew -Pversion=${TRAVIS_TAG#v} shadowJar bintrayUpload
deploy:
  provider: releases
  api_key:
    secure: nAfuGXgFwlJG2AZ4aoKbfCefXmMmjnKt8WlJ9CFChdeL3gExhmNAgrCNPJacyAqbG4iNmDCzniTK10A7KqznnDxOTKANuGLDHAgeakKJCtjZCxWswLWxrcaqDG8qfYGIa4+lfNJTXcokrOa4IMbtY/DCgTDd6bGtk/0vGmm+/Pg=
  skip_cleanup: true
  file_glob: true
  file: build/libs/instahttp.jar
  on:
    tags: true
    all_branches: true

env:
  global:
  - TERM=dumb
